const fs = require("fs")
const body = {
  base64_html:
    "PGh0bWwgYnJlYWstYWZ0ZXI9ImFsd2F5cyIgc3R5bGU9ImZvbnQ6IFZlcmRhbmE7Ij48dGFibGUgd2lkdGg9IjEwMCUiIGJvcmRlcj0iMCIgc3R5bGU9ImJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7Ij48dHI+PHRkIHJvd3NwYW49IjMiIGFsaWduPSJsZWZ0Ij48aW1nIGhlaWdodD0iNzBweCI+PC90ZD48dGQgYWxpZ249InJpZ2h0IiBjb2xvcj0iIzAwMDAwMCIgc3R5bGU9ImZvbnQtc2l6ZTogNjBweDsiPkNvdGl6YWNpw7NuPC90ZD48L3RyPjx0cj48dGQgYWxpZ249InJpZ2h0Ij5GZWNoYSAyNi8wOC8yMDIzPC90ZD48L3RyPjwvdGFibGU+PGJyPjx0YWJsZSB3aWR0aD0iMTAwJSIgc3R5bGU9ImJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7Ij48dHI+PHRkIGFsaWduPSJsZWZ0IiB3aWR0aD0iNTAlIj5HcnVwbyBHdXRhbHZvIFNBIGRlIENWPC90ZD48dGQgYWxpZ249InJpZ2h0Ij4oU0ZSKSBHQUJSSUVMQSBMT1BFWiBQVUdBIDwvdGQ+PC90cj48dHI+PHRkIGFsaWduPSJsZWZ0Ij5Db21vbmZvcnQgIzQ0NCwgQ29sIENlbnRyby4gTGVvbiwgR3VhbmFqdWF0bzwvdGQ+PHRkIGFsaWduPSJyaWdodCI+RnJhbmNpc2NvIEkuIE1hZGVybyAjMzU1IFB1cmlzaW1hIGRlbCZuYnNwO1JpbmPDs24sJm5ic3A7Y2VudHJvPC90ZD48L3RyPjx0cj48dGQgYWxpZ249ImxlZnQiPjQ3NyA3MTMgNDggMTU8L3RkPjwvdHI+PC90YWJsZT48YnI+PGJyPjx0YWJsZSBib3JkZXI9IjAiIHdpZHRoPSIxMDAlIiBzdHlsZT0iYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsiPjx0aGVhZD48dHIgc3R5bGU9ImJhY2tncm91bmQ6ICNlZWU7Ij48dGQgYWxpZ249ImNlbnRlciIgd29yZC13cmFwPSJicmVhay13b3JkIj48c3Ryb25nIHN0eWxlPSJmb250LXNpemU6IDE3cHggIWltcG9ydGFudDsiPiBBUlRJQ1VMTyA8L3N0cm9uZz48L3RkPjx0ZCBhbGlnbj0iY2VudGVyIiB3b3JkLXdyYXA9ImJyZWFrLXdvcmQiPjxzdHJvbmcgc3R5bGU9ImZvbnQtc2l6ZTogMTdweCAhaW1wb3J0YW50OyI+IFVOSURBREVTIDwvc3Ryb25nPjwvdGQ+PHRkIGFsaWduPSJjZW50ZXIiIHdvcmQtd3JhcD0iYnJlYWstd29yZCI+PHN0cm9uZyBzdHlsZT0iZm9udC1zaXplOiAxN3B4ICFpbXBvcnRhbnQ7Ij4gUFJFQ0lPIFUgPC9zdHJvbmc+PC90ZD48dGQgYWxpZ249InJpZ2h0IiB3b3JkLXdyYXA9ImJyZWFrLXdvcmQiPjxzdHJvbmcgc3R5bGU9ImZvbnQtc2l6ZTogMTdweCAhaW1wb3J0YW50OyI+IFRPVEFMIDwvc3Ryb25nPjwvdGQ+PC90cj48L3RoZWFkPjx0Ym9keT48dHIgc3R5bGU9ImJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkOyI+PHRkIHN0eWxlPSJmb250LXNpemU6IDE2cHggIWltcG9ydGFudDsiIGFsaWduPSJsZWZ0Ij5UVCA0eDIgMTUwbXRzIDFQPC90ZD48dGQgYWxpZ249ImNlbnRlciIgc3R5bGU9ImZvbnQtc2l6ZTogMTZweCAhaW1wb3J0YW50OyI+MjwvdGQ+PHRkIGFsaWduPSJjZW50ZXIiIHN0eWxlPSJmb250LXNpemU6IDE2cHggIWltcG9ydGFudDsiPiQzNDYuODE8L3RkPjx0ZCBzdHlsZT0iZm9udC1zaXplOiAxNnB4ICFpbXBvcnRhbnQ7IiBhbGlnbj0icmlnaHQiPiQ2OTMuNjI8L3RkPjwvdHI+PHRyPjx0ZCBjb2xzcGFuPSIyIj48L3RkPjx0ZCBib3JkZXI9IjAiIGFsaWduPSJyaWdodCIgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkIj5UT1RBTDwvdGQ+PHRkIGJvcmRlcj0iMCIgYWxpZ249InJpZ2h0IiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQiPiQ2OTMuNjI8L3RkPjwvdHI+PHRyPjx0ZCBzdHlsZT0iZm9udC1zaXplOiAyMHB4OyBmb250LXdlaWdodDogYm9sZDsiPkNvbmRpY2lvbmVzIGRlIGNvdGl6YWNpw7NuPC90ZD48L3RyPjx0cj48dGQ+PGRpdj4tJm5ic3A7U2UmbmJzcDtyZXF1aWVyZSZuYnNwO29yZGVuJm5ic3A7ZGUmbmJzcDtjb21wcmEuPGJyPi0mbmJzcDtUaWVtcG8mbmJzcDtkZSZuYnNwO2VudHJlZ2EmbmJzcDtkZSZuYnNwOzgmbmJzcDthJm5ic3A7MTImbmJzcDtkw61hcyZuYnNwO2jDoWJpbGVzJm5ic3A7KHNlZ8O6biZuYnNwO2Rpc3BvbmliaWxpZGFkJm5ic3A7ZW4mbmJzcDs8YnI+Jm5ic3A7ZXhpc3RlbmNpYXMpLjxicj4tJm5ic3A7UHJlY2lvcyZuYnNwO3N1amV0b3MmbmJzcDthJm5ic3A7Y2FtYmlvLCZuYnNwO3NpbiZuYnNwO3ByZXZpbyZuYnNwO2F2aXNvLiZuYnNwOzxicj4tJm5ic3A7RWwmbmJzcDtjbGllbnRlJm5ic3A7YWNlcHRhJm5ic3A7dW4mbmJzcDsxMCUmbmJzcDsrLSZuYnNwO2RlJm5ic3A7cHJvZHVjY2lvbiZuYnNwO2VuJm5ic3A7cGVkaWRvcyZuYnNwO2VzcGVjaWFsZXM8L2Rpdj48L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPjwvaHRtbD4="
};

(async () => {
    const rawResponse = await fetch('http://127.0.0.1:5001/to-do-daily-43d6e/us-central1/htmlBase64ToPdfBase64', {
      method: 'POST',
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(body)
    });
    const content = await rawResponse.json();
    const bin=atob(content.file)
    fs.writeFile('result_binary.pdf', bin, 'binary', error => {
        if (error) {
            throw error;
        } else {
            console.log('binary saved!');
        }
    });
    console.log(content);
  })();

